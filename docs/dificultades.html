<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="language" content="en" />
        <link href="./assets/caf9c96c/css/bootstrap.css" rel="stylesheet">
<link href="./assets/dbe19bdd/solarized_light.css" rel="stylesheet">
<link href="./assets/3baaa47c/style.css" rel="stylesheet">
<script src="./assets/3f3e3b9d/jquery.js"></script>
<script src="./assets/caf9c96c/js/bootstrap.js"></script>
<script src="./assets/756bff73/jssearch.js"></script>    <title>Dificultades - Dificultades encontradas y soluciones aplicadas - Guía de Gkri</title>
</head>
<body>

<div class="wrap">
    <nav id="w82" class="navbar-inverse navbar-fixed-top navbar" role="navigation"><div class="navbar-header"><button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#w82-collapse"><span class="sr-only">Toggle navigation</span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span></button><a class="navbar-brand" href="./index.html">Guía de Gkri</a></div><div id="w82-collapse" class="collapse navbar-collapse"><ul id="w83" class="navbar-nav nav"><li><a href="api/index.html">Class reference</a></li>
<li><a href="./README.html">Guide</a></li></ul><div class="navbar-form navbar-left" role="search">
  <div class="form-group">
    <input id="searchbox" type="text" class="form-control" placeholder="Search">
  </div>
</div>
</div></nav>
    <div id="search-resultbox" style="display: none;" class="modal-content">
        <ul id="search-results">
        </ul>
    </div>

    
<div class="row">
    <div class="col-md-2">
                <div id="navigation" class="list-group"><a class="list-group-item" href="#navigation-72" data-toggle="collapse" data-parent="#navigation">Descripción general del Proyecto <b class="caret"></b></a><div id="navigation-72" class="submenu panel-collapse collapse"><a class="list-group-item" href="./descripcion-general.html">Funcionalidad principal de la aplicación</a>
<a class="list-group-item" href="./descripcion-general.html">Objetivos Generales</a>
<a class="list-group-item" href="https://github.com/carlosgarcia8/gkri">Repositorio en GitHub</a>
<a class="list-group-item" href="https://carlosgarcia8.github.io/gkri/">Documentación</a></div>
<a class="list-group-item" href="#navigation-73" data-toggle="collapse" data-parent="#navigation">Instrucciones de instalación y despliegue <b class="caret"></b></a><div id="navigation-73" class="submenu panel-collapse collapse"><a class="list-group-item" href="./instrucciones.html">En local</a>
<a class="list-group-item" href="./instrucciones.html">En la nube</a></div>
<a class="list-group-item" href="#navigation-74" data-toggle="collapse" data-parent="#navigation">Catálogo de Requisitos <b class="caret"></b></a><div id="navigation-74" class="submenu panel-collapse collapse"><a class="list-group-item" href="./requisitos.html">Definición detallada</a>
<a class="list-group-item" href="./requisitos.html">Cuadro resumen</a></div>
<a class="list-group-item" href="#navigation-75" data-toggle="collapse" data-parent="#navigation">Manual básico de usuarios <b class="caret"></b></a><div id="navigation-75" class="submenu panel-collapse collapse"><a class="list-group-item" href="./manual.html">Manual</a></div>
<a class="list-group-item" href="#navigation-76" data-toggle="collapse" data-parent="#navigation">Decisiones adoptadas y su justificación <b class="caret"></b></a><div id="navigation-76" class="submenu panel-collapse collapse"><a class="list-group-item" href="./decisiones.html">Decisiones</a></div>
<a class="list-group-item active" href="#navigation-77" data-toggle="collapse" data-parent="#navigation">Dificultades encontradas y soluciones aplicadas <b class="caret"></b></a><div id="navigation-77" class="submenu panel-collapse collapse in"><a class="list-group-item active" href="./dificultades.html">Dificultades</a></div>
<a class="list-group-item" href="#navigation-78" data-toggle="collapse" data-parent="#navigation">Diagramas <b class="caret"></b></a><div id="navigation-78" class="submenu panel-collapse collapse"><a class="list-group-item" href="https://github.com/carlosgarcia8/gkri/raw/master/guia/images/diagrama-clase.png">De clases</a>
<a class="list-group-item" href="https://github.com/carlosgarcia8/gkri/raw/master/guia/images/diagrama-logico.png">De estructura lógica de datos</a></div>
<a class="list-group-item" href="#navigation-79" data-toggle="collapse" data-parent="#navigation">Glosario de términos <b class="caret"></b></a><div id="navigation-79" class="submenu panel-collapse collapse"><a class="list-group-item" href="./glosario.html">Glosario</a></div>
<a class="list-group-item" href="#navigation-80" data-toggle="collapse" data-parent="#navigation">Conclusiones <b class="caret"></b></a><div id="navigation-80" class="submenu panel-collapse collapse"><a class="list-group-item" href="./conclusiones.html">Conclusiones</a></div>
<a class="list-group-item" href="#navigation-81" data-toggle="collapse" data-parent="#navigation">Anexos <b class="caret"></b></a><div id="navigation-81" class="submenu panel-collapse collapse"><a class="list-group-item" href="./anexos.html">Anexos</a></div></div>    </div>
    <div class="col-md-9 guide-content" role="main">
        <h1>Dificultades encontradas y soluciones aplicadas <span id="dificultades-encontradas-y-soluciones-aplicadas"></span><a href="#dificultades-encontradas-y-soluciones-aplicadas" class="hashlink">&para;</a></h1><h4>Convertir de gif a mp4 <span id="convertir-de-gif-a-mp4"></span><a href="#convertir-de-gif-a-mp4" class="hashlink">&para;</a></h4><ul>
<li>A la hora de querer cambiar el formato de <code>image/gif</code> a <code>video/mp4</code> me encontré con el problema de que era pasar de una imagen a un video. Por medio de comandos parecía que se podía lograr, pero con una serie de librerías instaladas, las cuales el servidor Heroku no tenia instaladas por defecto. Probé a usar un web service que no era el que se usa ahora, pero era muy enrevesado y lo deje. Probé de muchas maneras y no daba con la tecla, por un momento pensé en dejarlo como gif aunque pesara mucho y no pudiera pausarlo, solo detenerlo y reanudarlo. Fue entonces cuando encontré la aplicación CloudConvert y empecé a usarla. Aunque solo te deja 25 conversiones diarias, las hace muy fácil por medio de su propia librería y haciendo uso de su api y con peticiones usando <code>curl</code> le pido que me de cuantas conversiones me quedan y si no tengo mas, impido que se suban gifs.</li>
</ul>
<hr />
<h4>Problemas con la extensión yii2/comments <span id="problemas-con-la-extension-yii2comments"></span><a href="#problemas-con-la-extension-yii2comments" class="hashlink">&para;</a></h4><ul>
<li><p>Uno de los problemas fue que los comentarios salían ordenados desde el más reciente al más antiguo, lo cual no tenía sentido. Sobre todo en el apartado 'replies' en el cual la conversación parecía ir al revés, pues los más nuevos iban arriba y los más antiguos se quedaban abajo. Me puse en contacto con el creador de la extensión y le comente el problema en la siguiente <a href="https://github.com/yii2mod/yii2-comments/issues/62">issue</a>. Al parecer por defecto el mysql que usaba él se lo ordenaba bien, en cambio en Postgresql me lo ordenaba al revés. La solución que me dio fue que añadió el orderBy en la consulta sql y ya lo hacía bien para todos.</p>
</li>
<li><p>El siguiente problema fue que al añadir un comentario nuevo, los eventos que les hubiera añadido yo a, por ejemplo, votar positivo, negativo o responder, se perdían. Se perdían por que la extensión se traía todo el árbol de comentarios y los añadia por ajax, perdiendo así los eventos que les añadia yo. Me puse en contacto con él de nuevo por medio de la siguiente <a href="https://github.com/yii2mod/yii2-comments/issues/65">issue</a>. Le añadió a la extensión la posibilidad de ejecutar eventos javascript antes y después de crear los comentarios, borrarlos y demás y ya con esto pude hacerlo funcionar como quería.</p>
</li>
</ul>
<hr />
<h4>Navbar de Bootstrap <span id="navbar-de-bootstrap"></span><a href="#navbar-de-bootstrap" class="hashlink">&para;</a></h4><ul>
<li>El widget del yii2 que saca el navbar de bootstrap traía por defecto el collapse, el cual para el menú que hacia yo para la aplicación salía bastante mal cuando hacia el responsive. La solución que hice fue deshabilitar el collapse y hacer mis propios media query para el menú, sin tener en cuenta bootstrap.</li>
</ul>
<hr />
<h4>La extensión yii2/user no realizaba 'repetir contraseña' para ninguna de sus opciones <span id="la-extension-yii2user-no-realizaba-repetir-contrasena-para-ninguna-de-sus-opciones"></span><a href="#la-extension-yii2user-no-realizaba-repetir-contrasena-para-ninguna-de-sus-opciones" class="hashlink">&para;</a></h4><ul>
<li>Al parecer el creador de la extensión no veía como una opción que el usuario al registrarse o al cambiar la contraseña, le solicitara el 'repetir contraseña' pues lo veía una perdida de tiempo. Tuve que sobre escribir sus formularios y lógica para poder implementarlo.</li>
</ul>
<hr />
<h4>Problema con correo Gmail <span id="problema-con-correo-gmail"></span><a href="#problema-con-correo-gmail" class="hashlink">&para;</a></h4><ul>
<li>Al intentar registrarse o enviar solicitud de recuperación de contraseña desde Heroku, el cual el servidor esta en Irlanda, gmail me bloqueaba la cuenta pues veía como un acceso malicioso que entrara desde allí. Al final tuve que pillarme otro servidor smtp y así tener un correo ajeno a google.</li>
</ul>
<hr />
<h4>Opciones del plugin Generador de Memes no funcionaban <span id="opciones-del-plugin-generador-de-memes-no-funcionaban"></span><a href="#opciones-del-plugin-generador-de-memes-no-funcionaban" class="hashlink">&para;</a></h4><ul>
<li>Usando el plugin jquery-meme-generator me di cuenta de que aunque el creador decía que la opción ShowAdvancedSettings funcionaba y demás, no lo hacia. Al parecer la opción la tenia, pero no la comprobaba. Modifique el código fuente añadiendole la comprobación y arreglado. Hice un fork en github, hice el cambio y le solicite un pull request para que nadie tuviera este error. <a href="https://github.com/carlosgarcia8/jquery-meme-generator/tree/patch-1">enlace al fork con el cambio</a></li>
</ul>
<hr />
<h4>Google Chrome cache <span id="google-chrome-cache"></span><a href="#google-chrome-cache" class="hashlink">&para;</a></h4><ul>
<li>Al subir cualquier imagen de avatar del usuario, chrome guarda en cache la anterior y da la sensación de que nunca se ha realizado tal subida de fichero. La solución que he hecho ha sido añadirle a la ruta un parámetro <code>t</code> con la fecha actual, así chrome se cree que es una petición distinta de fichero y siempre lo recarga. Ejemplo: <code>/uploads/posts/4.mp4?t=24-05-2017-09:09:15</code></li>
</ul>
        <div class="toplink"><a href="#" class="h1" title="go to top"><span class="glyphicon glyphicon-arrow-up"></a></div>
    </div>
</div>


</div>

<footer class="footer">
        <p class="pull-right"><small>Page generated on Mon, 12 Jun 2017 11:16:42 +0000</small></p>
    Powered by <a href="http://www.yiiframework.com/" rel="external">Yii Framework</a></footer>

<script type="text/javascript">jQuery(document).ready(function () {
    var shiftWindow = function () { scrollBy(0, -50) };
    if (location.hash) setTimeout(shiftWindow, 1);
    window.addEventListener("hashchange", shiftWindow);
var element = document.createElement("script");
element.src = "./jssearch.index.js";
document.body.appendChild(element);

var searchBox = $('#searchbox');

// search when typing in search field
searchBox.on("keyup", function(event) {
    var query = $(this).val();

    if (query == '' || event.which == 27) {
        $('#search-resultbox').hide();
        return;
    } else if (event.which == 13) {
        var selectedLink = $('#search-resultbox a.selected');
        if (selectedLink.length != 0) {
            document.location = selectedLink.attr('href');
            return;
        }
    } else if (event.which == 38 || event.which == 40) {
        $('#search-resultbox').show();

        var selected = $('#search-resultbox a.selected');
        if (selected.length == 0) {
            $('#search-results').find('a').first().addClass('selected');
        } else {
            var next;
            if (event.which == 40) {
                next = selected.parent().next().find('a').first();
            } else {
                next = selected.parent().prev().find('a').first();
            }
            if (next.length != 0) {
                var resultbox = $('#search-results');
                var position = next.position();

//              TODO scrolling is buggy and jumps around
//                resultbox.scrollTop(Math.floor(position.top));
//                console.log(position.top);

                selected.removeClass('selected');
                next.addClass('selected');
            }
        }

        return;
    }
    $('#search-resultbox').show();
    $('#search-results').html('<li><span class="no-results">No results</span></li>');

    var result = jssearch.search(query);

    if (result.length > 0) {
        var i = 0;
        var resHtml = '';

        for (var key in result) {
            if (i++ > 20) {
                break;
            }
            resHtml = resHtml +
            '<li><a href="' + result[key].file.u.substr(3) +'"><span class="title">' + result[key].file.t + '</span>' +
            '<span class="description">' + result[key].file.d + '</span></a></li>';
        }
        $('#search-results').html(resHtml);
    }
});

// hide the search results on ESC
$(document).on("keyup", function(event) { if (event.which == 27) { $('#search-resultbox').hide(); } });
// hide search results on click to document
$(document).bind('click', function (e) { $('#search-resultbox').hide(); });
// except the following:
searchBox.bind('click', function(e) { e.stopPropagation(); });
$('#search-resultbox').bind('click', function(e) { e.stopPropagation(); });

});</script></body>
</html>
